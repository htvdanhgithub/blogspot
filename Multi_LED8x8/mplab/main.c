#define WINDOW_BASE 0
#if (WINDOW_BASE)
#include <stdint.h>
#include <stdio.h>
#include <cstdlib>
#include <iostream>
#include <conio.h>
#include <unistd.h>
#include <windows.h>
#include <time.h>
#include <stdlib.h>
#endif
#include "common.h"
#include "logic.h"
#include "hal.h"

#include "debug.h"
#if (WINDOW_BASE)
#include "unittest.h"
#endif

#if (WINDOW_BASE)
MATRIX_t g_matrix =
{
0x0,	0x0,	0x0,	0x0,
0x9F,	0x9F,	0x9F,	0x9F,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0x0,	0x0,	0x0,	0x0,
0x9F,	0x9F,	0x9F,	0x9F,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0x0,	0x0,	0x0,	0x0,
0x9F,	0x9F,	0x9F,	0x9F,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0x0,	0x0,	0x0,	0x0,
0x9F,	0x9F,	0x9F,	0x9F,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
};
#endif

void main_init()
{
#if !WINDOW_BASE
    max7219_init1();
#endif    
    
    dbg_init();
}     
void main_close()
{
    dbg_close();
}     
int main()
{
    main_init();
  
#if (WINDOW_BASE)
//    testsuite_run();    
    printf_matrix(&g_matrix);
    MATRIX_SET_BIT(g_matrix.data, 31, 31, 0);
    printf_matrix(&g_matrix);
//    debug_print(0, "Danh number %d\n", WINDOW_BASE);    
#else
    hal_print_MATRIX_MATRIX7219(&g_matrix_matrix8x8);    
#endif
    main_close();
#if (WINDOW_BASE)
    system("PAUSE");
#endif
    return 0;
}
