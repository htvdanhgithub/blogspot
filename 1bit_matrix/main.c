#define DEBUG 1

#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include "1bit_matrix.h"

#define MATRIX_WIDTH_MAX 32
#define MATRIX_HEIGHT_MAX 32

typedef struct 
{
    uint8_t data[MATRIX_HEIGHT_MAX][MATRIX_WIDTH_MAX/8];
} MATRIX_t;

MATRIX_t g_matrix =
{
0x0,	0x0,	0x0,	0x0,
0x9F,	0x9F,	0x9F,	0x9F,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0x0,	0x0,	0x0,	0x0,
0x9F,	0x9F,	0x9F,	0x9F,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0x0,	0x0,	0x0,	0x0,
0x9F,	0x9F,	0x9F,	0x9F,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0x0,	0x0,	0x0,	0x0,
0x9F,	0x9F,	0x9F,	0x9F,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
0xFF,	0xFF,	0xFF,	0xFF,
};

FILE* fp;

void dbg_init()
{
    fp = fopen("debug.txt", "w");
    if(fp==NULL)
    {
        fprintf(fp, "File Not Found");
        exit(-1);
    }     
} 
void dbg_close()
{
    fclose(fp);
}
void printf_matrix(const MATRIX_t *matrix)
{
     printf("<<<<<<<<<<<<<<<<<<<<\n");
     for(uint8_t row = 0; row < MATRIX_WIDTH_MAX; row++)
     {
         for(uint8_t col = 0; col < MATRIX_HEIGHT_MAX; col++)
         {
                if(ONEBIT_MATRIX_GET_BIT(matrix->data, row, col) == 1)     
                {
                    printf("*");                          
                }
                else
                {
                    printf("_");
                }                                                                            
         }                 
         printf("\n");
     }                                  
     printf(">>>>>>>>>>>>>>>>>>>>\n");
}
int main(int argc, char *argv[])
{
  dbg_init();
  printf_matrix(&g_matrix);
  ONEBIT_MATRIX_SET_BIT(g_matrix.data, 10, 10, 0);
  printf_matrix(&g_matrix);
  dbg_close();  
  system("PAUSE");	
  return 0;
}
